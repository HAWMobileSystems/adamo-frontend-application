<div class="height-100" [ngSwitch]="page">
    <div class="height-10">
        <!--Navigation bar-->
        <nav class="navbar navbar-default height-50" role="navigation">
            <ul class="nav navbar-nav" [ngClass]="{'disabled': loading}">
                <li *ngFor="let model of models; let i = index" [ngClass]="{'active': page === model.id + '_' + model.version}" (click)="page = model.id + '_' + model.version">
                    <a (mouseenter)="model.showInfo = true" (mouseleave)="model.showInfo = false" style="padding-right: 30px;">
                        {{model.name + ' v' +(model.version | version) || 'unsaved model'}}
                        <span *ngIf="model.collaborator.length > 1" style="margin-right: 0;" class="badge badge-light">
                            {{model.collaborator.length}}
                        </span>
                    </a>
                    <button class="badge badge-light" style="position: absolute; top: 0; right: 0;" (click)="remove(i)">X</button>
                    <div *ngIf="model.collaborator.length > 1 && model.showInfo"
                         style="position: absolute; top: 100%; z-index: 100"
                         class="panel panel-default">
                        <div class="panel-heading">
                            Collaborators
                        </div>
                        <div class="panel-body">
                            <ul>
                                <li *ngFor="let collaborator of model.collaborator">
                                    {{collaborator}}
                                </li>
                            </ul>
                        </div>
                    </div>
                </li>
                <li [ngClass]="{'active': page === '+'}" (click)="page = '+'"><a>+</a></li>
                <li *ngIf="permission === 1" [ngClass]="{'active': page === 'administration'}" (click)="page = 'administration';"><a>Administration</a></li>
                <li *ngIf="loading">
                    <img *ngIf="loading" style="height: inherit" src="data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA=="/>
                </li>
                <li style="position: absolute; right: 0; cursor: pointer">
                    <a (click)="showMenu = !showMenu"><img src="user.png" class="userimage">{{username}}</a>
                        <div *ngIf="showMenu"
                                style="position: absolute; top: 100%; z-index: 100; cursor: auto"
                                class="panel panel-default">
                               <div class="panel-heading">
                                   Menu
                               </div>
                               <div class="panel-body">
                                   <ul>
                                       <li>
                                         <a href="front-page">Logout</a>
                                       </li>
                                   </ul>
                               </div>
                           </div>
                </li>
            </ul>
        </nav>
    </div>

    <!--Models-->
    <div class="col-md-8 col-md-offset-2 centered" [hidden]="page!=='+'">
        <modelloader (loadModel)="onLoadModel($event)" (loadError)="loadError($event)"></modelloader>
    </div>
    <modeler (loadedCompletely)="onLoadedCompletely($event)" (exportModel)="onExportModel($event)" (loadSubProcess)="onLoadSubProcess($event)"
             *ngFor="let model of models" [hidden]="page !== model.id + '_' + model.version" [modelId]="'model_'+model.id + '_' + model.version"
             [newDiagramXML]="model.xml" [model]="model">
    </modeler>

    <div *ngIf="page==='administration' && permission === 1" class="col-md-6 col-md-offset-3 centered" [ngSwitch]="page2">
        <nav class="navbar navbar-default" role="navigation">
            <ul class="nav navbar-nav">
                <li [ngClass]="{'active': page2 ==='User'}" (click)="page2 = 'User'"><a>User</a></li>
                <li [ngClass]="{'active': page2 ==='Model'}" (click)="page2 = 'Model'"><a>Model</a></li>
                <li [ngClass]="{'active': page2 ==='Role'}" (click)="page2 = 'Role'"><a>Role</a></li>
                <li [ngClass]="{'active': page2 ==='Permission'}" (click)="page2 = 'Permission'"><a>Permission</a></li>
            </ul>
        </nav>
        <div *ngSwitchCase="'User'">
            <user-management></user-management>
        </div>
        <div *ngSwitchCase="'Model'">
            <model-management></model-management>
        </div>
        <div *ngSwitchCase="'Role'">
            <role-management></role-management>
        </div>
        <div *ngSwitchCase="'Permission'">
            <permission-management></permission-management>
        </div>
    </div>
</div>

<div id="snackbarPage">
        <div *ngFor="let message of snackBarMessages" [style.backgroundColor]="message.color" class="snackbarItem">
                {{message.text}}
        </div>
</div>